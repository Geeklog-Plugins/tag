<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<title>Install/Uninstall instruction for the Geeklog tag plugin</title>
	<style type="text/css">
	<!-->
		body {
			color: black;
			background-color: white;
			line-height: 1.5em;
		}
		table {
		 	border: solid 1px black;
			border-collapse: collapse;
		}
		h2 {
			margin-top: 50px;
			border-left: solid 10px #0033cc;
			padding-left: 5px;
		}
		code {
			line-height: 1.5em;
			display: block;
			width: 80%;
			border: dotted 1px black;
			background-color: #ccffff;
			padding: 5px;
			margin: 10px;
		}
		th,
		td
		{
		 	border: solid 1px black;
			padding: 5px;
		}
		.geeklog {
			background-color: yellow;
		}
		.public {
			background-color: #99ff00;
		}
		.admin {
			background-color: aqua;
		}
		.center {
			text-align: center;
		}
		#copyright {
			padding: 0.5em;
			border: solid 1px aqua;
			background-color: #ccffff;
			font-style: italic;
		}
		.fix {
			color: white;
			background-color: red;
			font-weight: bold;
		}
		.new {
			color: white;
			background-color: blue;
			font-weight: bold;
		}
	<! -->
	</style>
</head>

<body>
	<h1>Install/Uninstall instruction for the Geeklog tag plugin</h1>
	
	<table>
		<tr>
			<th>Plugin Name</th>
			<td>Tag plugin</td>
		</tr>
		<tr>
			<th>Version</th>
			<td>0.6.0</td>
		</tr>
		<tr>
			<th>Required Geeklog Version</th>
			<td>1.7.1 or later</td>
		</tr>
		<tr>
			<th>Author</th>
			<td>mystral-kk - geeklog AT mystral-kk DOT net</td>
		</tr>
		<tr>
			<th>License</th>
			<td>GPL</td>
		</tr>
	</table>
	
	<h2>ABSTRACT</h2>
	
	<p>Tag plugin enables you to put "tags" to your articles and make it easier for you and visitors to classify articles using the tags.</p>
	
	<h2>INSTALL</h2>

	<p>In the following descriptions</p>
	<ul>
		<li><span class="geeklog">&lt;geeklog_dir&gt;</span> is the directory where the system config.php file resides</li>
		<li><span class="public">&lt;public_html&gt;</span> is the directory where the lib-common.php file resides</li>
		<li><span class="admin">&lt;admin&gt;</span> is the directory where the administration files reside (usually, under <span class="public">&lt;public_html&gt;</span>)</li>
	</ul>

	<ol>
		<li>Back up your Geeklog Database.  The tag plugin adds tables to your Geeklog database.  You can do this with the built in admin backup facility.</li>
		<li>Uncompress the tag plugin archive while in the <span class="geeklog">&lt;geeklog_dir&gt;</span>/plugins directory.  The archive will create a directory called tag in the plugins directory.</li>
		<li>Create the public_html and admin directories.  Under your html directory (usually <span class="public">&lt;public_html&gt;</span>) create a directory called tag.  Under your <span class="admin">&lt;admin&gt;</span>/plugins/ directory create a directory called tag.</li>
		<li>Change to your <span class="geeklog">&lt;geeklog_dir&gt;</span>/plugins/tag/ directory.  Copy the files in the admin directory to the <span class="admin">&lt;admin&gt;</span>/plugins/tag/ directory your created in step 3.  Copy the files and directories in the public_html directory to the <span class="public">&lt;public_html&gt;</span>/tag/ directory your created in step 3.</li>
		<li>Edit the config.php in the tag directory and confirm the table prefix and anonymous access settings and other display settings.  The default is to use the geeklog table prefix and not allow anonymous access.</li>
		<li>Log in to your Geeklog as a root user and run install.php in your <span class="admin">&lt;admin&gt;</span>/plugins/tag/ directory.  The install page will tell you if the install was successful or not.  If not, examine Geeklog system errorlog for possible problems.  The tag plugin should now be installed and functioning.  Clicking on the tag Icon will take you to the admin page.</li>
		<li>Set up security.  On install only the root users have access to tag administration and Viewing.  You can delegate control for either of these functions through the user and group editors.</li>
	</ol>

	<h2>UNINSTALL</h2>

	<ol>
		<li>Run the install.php page in your <span class="admin">&lt;admin&gt;</span>/plugins/tag directory.  This will remove all the data from your database.</li>
		<li>Delete the three plugin directories created in the install process:  <span class="geeklog">&lt;geeklog-dir&gt;</span>/plugins/tag/, <span class="public">&lt;public_html&gt;</span>/tag/ and <span class="admin">&lt;admin&gt;</span>/plugins/tag/</li>
	</ol>
	
	<h2>USAGE</h2>
	
	<p>When you are writing an article or a staticpage, and want to put tags to it, just enter <code>[tag:your_favorite_tag]</code>in the item.  You can use multiple tags like this:<code>[tag:Geeklog plugins]</code>Each tag must be separated by a space.  If you would like to register words as one tag, such as "Zend Framework", you should enter "Zend_Framework".  By default, tags are case-insensitive.  For example, the tag "Geeklog" will be identified with "geeklog" or "GEEKLOG".</p>
	
	<ul>
		<li>If you want to ban certain tags, you can do so in the admin control panel.  Bad words are also case-insensitive.</li>
		<li>If you would like to display "tag clouds" in your site block, just create a PHP block with the function name being <strong>phpblock_tag_cloud</strong>.<br><strong>NOTE</strong>: Since version 0.2.0, a tag cloud block will be created automatically during installation.</li>
		<li>The apperance of tag clouds are controlled with templates (in <span class="geeklog">&lt;geeklog&gt;</span>/plugins/tag/templates/) and Cascading Style Sheet (as <span class="public">&lt;public_html&gt;</span>/tag/tag.css).  In case <span class="public">&lt;public_html&gt;</span>/layout/your_theme/tag.css exists, this will be preferred over <span class="public">&lt;public_html&gt;</span>/tag/tag.css.</li>
		<li>(Version-0.3.0 or later)  If you would like to display a menu based on tags in your site block, just create a PHP block with the function name being <strong>phpblock_tag_menu</strong>.  You can edit menu items in the admin control panel.<br><strong>NOTE</strong>: Since version 0.3.0, a tag menu block will be created automatically during installation.</li>
	</ul>
	
	<h2>Configurations</h2>
	
	<p>You can change some behavior of tag plugin by the Configuration menu after you have logged in as the site admin.  Available options are:</p>
	<table>
		<caption>[Configuration Options]</caption>
		<tr>
			<th>Item(Var name)</th>
			<th>Default Value</th>
			<th>Description</th>
		</tr>
		<tr>
			<td><a name="desc_hidetagmenu">Hide Tag Menu entry</a>('hidetagmenu')</td>
			<td>false</td>
			<td>Setting this option to true hides the Tag entry from the top menu.</td>
		</tr>
		<tr>
			<td><a name="desc_default_block_name">Default name for Tag Cloud Block</a>('default_block_name')</td>
			<td>'tag_cloud_block'</td>
			<td>The default name of tag block which will be created during the installation.  If you use Geeklog-1.4.1 or later and disable/enable the tag plugin, the block named $_TAG_CONF['default_block_name'] will also be disabled/enabled automatically.</td>
		</tr>
		<tr>
			<td><a name="desc_tag_name">Tag name</a>('tag_name')</td>
			<td>tag</td>
			<td>Tag name to be used in items (articles), like '[tag:foo]'.  You might prefer a shorter name like '[t:foo]'.</td>
		</tr>
		<tr>
			<td><a name="desc_max_tag_len">Max length of tag in bytes</a>('max_tag_len')</td>
			<td>60</td>
			<td>Max length of a tag in bytes.  Should not be longer than 255.</td>
		</tr>
		<tr>
			<td><a name="desc_tag_case_sensitive">Tag case-sensitive</a>('tag_case_sensitive')</td>
			<td>false</td>
			<td>If this is true, the tag "Geeklog" will NOT be identified with the tag "geeklog".  When you change this option, you should re-install tag plugin.</td>
		</tr>
		<tr>
			<td><a name="desc_tag_stemming">Allow stemming words</a>('tag_stemming')</td>
			<td>false</td>
			<td>If this is true, each tag consisting only of alphabets will be stemmed.  For example, tag "realize" will be stemmed into "real", thus tag "realize" will be identidied with tag "real".<br><br><strong>@WARNING</strong>: The stemming feature is still experimental.  For example, 'Firefox' is stemmed into 'Firefoxi'.  So, I don't recommend you set $_TAG_CONF['tag_stemming'] to true for the time being (and forever, maybe).</td>
		</tr>
		<tr>
			<td><a name="desc_tag_check_badword">Use list of bad words</a>('tag_check_badword')</td>
			<td>true</td>
			<td>Whether to use a list of bad words.  If a tag is regarded as bad, it will be automatically replaced with $LANG_TAG['badword_replace'] defined in the language file.</td>
		</tr>
		<tr>
			<td><a name="desc_tag_cloud_spacer">String to be used as spacer in Tag Cloud</a>('tag_cloud_spacer')</td>
			<td>&nbsp;&nbsp;(2 spaces)</td>
			<td>A string to be used as a spacer in displaying tag clouds</td>
		</tr>
		<tr>
			<td><a name="desc_max_tag_cloud">Max number of tags in Tag Cloud</a>('max_tag_cloud')</td>
			<td>30</td>
			<td>Max number of tags to be displayed in tag clouds in public_html/tag/index.php</td>
		</tr>
		<tr>
			<td><a name="desc_max_tag_cloud_in_block">Max Number of tgas in Tag Cloud Block</a>('max_tag_cloud_in_block')</td>
			<td>20</td>
			<td>Max number of tags to be displayed in tag clouds in side block</td>
		</tr>
		<tr>
			<td><a name="desc_tag_cloud_threshold">Threshold of Tag Levels</a>('tag_cloud_threshold')</td>
			<td>
				Level 0 = 1<br>
				Level 1 = 2<br>
				Level 2 = 3<br>
				Level 3 = 4<br>
				Level 4 = 5<br>
				Level 5 = 6<br>
				Level 6 = 7<br>
				Level 7 = 8<br>
				Level 8 = 9<br>
				Level 9 = 10<br>
			</td>
			<td>Thresholds of frequency of each tag cloud level.  All tag clouds are classified in 10 levels (Level 0..Level 9).  Those tags whose number is equal to or smaller than the level are considered to belong to the level.  Each level corresponds to its own class in CSS(Cascading Style Sheet), so you can display in different styles tags according to their levels.</td>
		</tr>
		<tr>
			<td><a name="desc_tag_cloud_threshold_max_count">Threshold of percentage-based system</td>
			<td>20</td>
			<td>This is the maximum number of tag count over which we switch to the percentage-based threshold system.  Once the number of a given tag reaches the threshold, we calculate the tag level based not on the number of the tag itself but on the percentage of the frequency of the tag.  You can change the threshold in the configuration("Threshold of percentage-based system").  If you don't want to use the new percentage-based threshold system, set a very large number, say, 999999.    Thanks, Tom!</td>
		</tr>
		<tr>
			<td><a name="desc_replace_underscore">Replace an underscore with a space</a>('replace_underscore')</td>
			<td>false</td>
			<td>Whether to replace an underscore included in tag texts with a space when a tag is displayed.</td>
		</tr>
		<tr>
			<td><a name="desc_num_keywords">Max number of keywords</a>('num_keywords')</td>
			<td>0</td>
			<td>The number of key words to be included in &lt;meta name="keywords" content="foo,bar"&gt; tag.  If the number is 0, the meta tag won't be included.</td>
		</tr>
		<tr>
			<td><a name="desc_publish_as_template_vars">Publish tags as template vars</a>('publish_as_template_vars')</td>
			<td>false</td>
			<td>If this is set to true, tags will NOT be displayed where they should be in the artcile, but will be published as template vars ({tag_label} and {tag_part}) which can be used in 'storytext.thtml', 'featuredstorytext.thtml', and 'archivestorytext.thtml'.  If this is set to false, tags will be displayed in the article.</td>
		</tr>
		<tr>
			<td><a name="desc_add_num_items_to_menu">Display number of items in Tag Menu</a>('add_num_items_to_menu')</td>
			<td>false</td>
			<td>Whether to add the number of items to each tag menu item.<br><strong>@note This feature could be a costly operation.</strong></td>
		</tr>
		<tr>
			<td><a name="desc_menu_indenter">String to be used as an indenter in Tag Menu</a>('menu_indenter')</td>
			<td>&amp;nbsp;&amp;nbsp;&amp;nbsp;</td>
			<td>A string to indent an item of tag menu</td>
		</tr>
	</table>
	
	<h2>REVISION HISTORY</h2>
	
	<table>
		<tr>
			<th>Version</th>
			<th style="width: 5em;">Date</th>
			<th>Description</th>
		</tr>
		<tr>
			<td class="center">0.6.0</td>
			<td class="center">2012-06-17</td>
			<td>
				<span class="new">New</span> Upgraded to work with Geeklog-2.0.0.<br>
				<span class="new">New</span> Created 3 new API calls to enable other plugins to define and display tags in their contents.  Thanks for the idea, dengen!<br>
				<ul>
					<li>function plugin_tag_scanall_<strong>pluginname</strong>()</li>
					<li>plugin_tag_scantag_<strong>pluginname</strong>($id)</li>
					<li>plugin_tag_gettaggeditems_<strong>pluginname</strong>($id)</li>
				</ul>
				Please see "geeklog/plugins/tag/functions.inc" for examples of the staticpages plugin provided by dengen.
			</td>
		</tr>
		<tr>
			<td class="center">0.5.4</td>
			<td class="center">2011-10-02</td>
			<td>
				<span class="fix">Fix</span> Fixed several bugs<br>
					<ul>
						<li>where you couldn't delete registered tags</li>
						<li>where you could register a tag containing only white spaces</li>
						<li>where you encountered an SQL error when you tried to ban a tag which has already been banned</li>
						<li>where you encountered an error when you tried to delete or ban a tag without checking any tags</li>
						<li>of some inappropriate HTML tags in admin panel</li>
					</ul><br>Patch provided by Yoshinori Tahara.  Thanks, dengen!
			</td>
		</tr>
		<tr>
			<td class="center">0.5.3</td>
			<td class="center">2011-04-23</td>
			<td>
				<span class="fix">Fix</span> Fixed to work with the staticpages plugin v1.6.3 (shipped with Geeklog-1.7.1) when you use staticpages template feature.  Patch provided by Tom.  Thanks, Tom!
			</td>
		</tr>
		<tr>
			<td class="center">0.5.2</td>
			<td class="center">2011-01-04</td>
			<td>
				<span class="fix">Fix</span> Fixed an error when there is no item to diplay.  Thanks, Tom!<br>
				<span class="new">New</span> Introduced a new configuration item to switch to the percentage-based threshold system.  See <a href="#desc_tag_cloud_threshold_max_count">the above</a> for further information.  Thanks, Tom!
			</td>
		</tr>
		<tr>
			<td class="center">0.5.1</td>
			<td class="center">2010-12-28</td>
			<td>
				<span class="fix">Fix</span> Fixed an error when you try to upgrade from version 0.3.2 or earlier.  Thanks, Hiroron!
			</td>
		</tr>
		<tr>
			<td class="center">0.5.0</td>
			<td class="center">2010-12-27</td>
			<td>
				<span class="new">New</span> Now the Tag plugin supports Staticpages.<br>
				<span class="new">New</span> Added an option to hide Tag entry from the main menu.<br>
				<span class="fix">Fix</span> Modified to work properly when the id of an article was changed.
			</td>
		</tr>
		<tr>
			<td class="center">0.4.1</td>
			<td class="center">2008-08-18</td>
			<td>
				<span class="fix">Fix</span> Modified to work well with DokuWiki plugin.
			</td>
		</tr>
		<tr>
			<td class="center">0.4.0</td>
			<td class="center">2008-08-12</td>
			<td>
				<span class="new">New</span> Modified to work well with Geeklog-1.5.0.  You can now config Tag plugin using GL's configuration UI.
			</td>
		</tr>
		<tr>
			<td class="center">0.3.2</td>
			<td class="center">2008-02-28</td>
			<td>
				<span class="fix">Fixed</span> to better delete non-existent tags from database.<br>
				<span class="fix">Fixed</span> to handle 'XHTML' constant properly when &lt;meta name="keywords" content="foo,bar"&gt; is published.<br>
				<span class="fix">Fixed</span> to better handle underscores when $_TAG_CONF['replace_underscore'] is true.
			</td>
		</tr>
		<tr>
			<td class="center">0.3.1</td>
			<td class="center">2008-01-23</td>
			<td>
				<span class="fix">Fixed</span> an error which happens when upgrading from version 0.2.0 to 0.3.0.<br>
				<span class="new">New!</span> Added an option to show the number of items next to tag menu items.<br>
			</td>
		</tr>
		<tr>
			<td class="center">0.3.0</td>
			<td class="center">2008-01-22</td>
			<td>
				<span class="new">New!</span> Added a menu based on tags (experimental).<br>
				<span class="new">New!</span> Added an option to replace an underscore ('_') included in tag texts with a space.<br>
				<span class="new">New!</span> Added an option to publish most frequent tags in the &lt;meta name="keywords" content="foo,bar"&gt; tag in the head.<br>
				<span class="new">New!</span> Added an option to publish tags as template vars.  See <a href="#CONF_publish_as_template_vars">the above</a> for detail.<br>
			</td>
		</tr>
		<tr>
			<td class="center">0.2.0</td>
			<td class="center">2008-01-14</td>
			<td><span class="fix">Fixed</span> broken links to stories in tag clouds when URL_rewite is off.<br><span class="new">New!</span> Now, the tag plugin will automatically rescan exisiting tags included in stories in case of re-installation.<br><span class="new">New!</span> Now, you can delete wrongly registered tags in the admin panel.<br><span class="new">New!</span> Now, a tag cloud block will be created automatically during installation.</td>
		</tr>
		<tr>
			<td class="center">0.1.0</td>
			<td class="center">2008-01-12</td>
			<td>Initial version</td>
		</tr>
	</table>
	
	<p id="copyright">Copyright &copy; 2006-2012 mystral-kk</p>
</body>
</html>
